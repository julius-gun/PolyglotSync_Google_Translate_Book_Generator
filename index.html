<!DOCTYPE html>
<html>

<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.6.0/jszip.min.js"></script>
  <title>Bilingual Book Generator</title>
  <!-- Updated path for styles.css -->
  <link rel="stylesheet" href="assets/styles.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/js/all.min.js"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-HP6ZDS0E04');
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

  <!-- Updated JS paths and order -->
  <!-- Data and Config first -->
  <script src="assets/config.js" defer></script>
  <script src="assets/language_data.js" defer></script>
  <script src="assets/ui_translations.js" defer></script>
  <!-- Utilities and API -->
  <script src="assets/translation_utils.js" defer></script>
  <script src="assets/translation_api.js" defer></script>
  <script src="assets/epub_generator.js" defer></script>
  <!-- UI Logic -->
  <script src="assets/ui.js" defer></script>
  <!-- Main orchestration script last -->
  <script src="assets/main.js" defer></script>

  <!-- Removed old script tags for languages.js and translations.js -->
</head>

<body>
  <!-- START: Firefox Warning Message (Hidden by default) -->
  <div id="firefox-warning" class="hide" style="background-color: #ffdddd; border: 1px solid #f44336; color: #a94442; padding: 15px; margin: 10px; text-align: center; border-radius: 5px; font-size: 0.9em;">
    <strong>Notice:</strong> This application currently experiences issues in Firefox due to browser-specific restrictions on accessing translation services. For the best experience, please use Google Chrome or another Chromium-based browser.
  </div>
  <!-- END: Firefox Warning Message -->

  <div class="del">
    <header>
      <h1>Bilingual Book Generator</h1>
      <div id="language-selector-container">
        <!-- ADD GITHUB LINK HERE -->
        <a href="https://github.com/julius-gun/PolyglotSync_Google_Translate_Book_Generator" target="_blank" rel="noopener noreferrer" id="github-link" aria-label="View source on GitHub" style="text-decoration: none; color: inherit; margin-right: 10px;">
            <i class="fa-brands fa-github" style="font-size: 1.8rem; vertical-align: middle;"></i>
        </a>
        <label id="ui-language-label" for="ui-language-selector">
          <span id="ui-language-icon">üåê</span>
          <span>UI Language:</span> <!-- Initial text, updated by JS -->
        </label>
        <!-- UI Language selector will be added here by JavaScript -->
      </div>
    </header>
    <div id="sl-container">
      <label for="sl">Source Language:</label> <!--This will be translated-->
      <select id="sl"></select>
    </div>

    <div id="tl1-container">
      <label for="tl1">Target Language 1:</label> <!--This will be translated-->
      <select id="tl1"></select>
      <button class="add-lang-button" onclick="showTargetLang('tl2-container')">+</button>
    </div>

    <div id="tl2-container" class="hide">
      <label for="tl2">Target Language 2:</label> <!--This will be translated-->
      <select id="tl2"></select>
      <button class="add-lang-button" onclick="showTargetLang('tl3-container')">+</button>
      <button class="remove-lang-button" onclick="hideTargetLang('tl2-container')">-</button>
      <!-- Added remove button -->
    </div>

    <div id="tl3-container" class="hide">
      <label for="tl3">Target Language 3:</label> <!--This will be translated-->
      <select id="tl3"></select>
      <button class="add-lang-button" onclick="showTargetLang('tl4-container')">+</button>
      <button class="remove-lang-button" onclick="hideTargetLang('tl3-container')">-</button>
      <!-- Added remove button -->
    </div>

    <div id="tl4-container" class="hide">
      <label for="tl4">Target Language 4:</label> <!--This will be translated-->
      <select id="tl4"></select>
      <button class="remove-lang-button" onclick="hideTargetLang('tl4-container')">-</button>
      <!-- Added remove button -->
    </div>

    <br>
    <h3>Enter source text:</h3>
    <textarea id="source-text" placeholder="Enter your source text here..."></textarea>
    <button id="generate-button">Generate Book</button>
    <button id="toggle-theme-button">Toggle Theme</button>
    <!-- Moved Post-Translation Buttons Here -->
    <button id="open-book-view-button" class="hide" style="margin-left: 10px;">Open in Book-View</button>
    <button id="save-epub-button" class="hide" style="margin-left: 5px;">Save as EPUB</button>
    <button id="reload-page-button" class="hide" style="margin-left: 5px;">Reload Page</button>

    <!-- Progress Bar -->
    <div id="progress-container" style="margin-top: 20px;"> <!-- Added margin-top for spacing -->
      <div id="progress-bar">0%</div>
    </div>
    <div id="progress-info">
      <span>Translated: 0 / 0</span> | <!--This will be translated-->
      <span>ETA: Calculating...</span> <!--This will be translated-->
    </div>
    <!-- Moved Translation Finished Message Here -->
    <div id="translation-finished-message" class="hide" style="margin-top: 10px; font-weight: bold;">Translation process
      over.</div>
  </div>
  <div id="output"></div>

</body>

</html>